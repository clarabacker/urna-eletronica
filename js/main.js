let candidatosPorTurma = {
    "1": { // 1º ano
        "111": [ // Turma A
            { nome: "Candidato 1", numero: "111", foto: "candidato1.png" },
            { nome: "Candidato 2", numero: "112", foto: "candidato2.png" },
            { nome: "Candidato 3", numero: "113", foto: "candidato3.png" },
            { nome: "Candidato 4", numero: "114", foto: "candidato4.png" },  
        ],
        "112": [ // Turma B
            { nome: "Candidato 1", numero: "121", foto: "candidato3.png" },
            { nome: "Candidato 2", numero: "122", foto: "candidato4.png" },    
        ],
    },
    "2": { // 2º ano
        "121": [ // Turma 121M
            { nome: "Candidato 1", numero: "211", foto: "candidato1.png" },
            { nome: "Candidato 2", numero: "212", foto: "candidato5.png" },
        ],
        "122": [ // Turma 122M
            { nome: "Candidato 1", numero: "221", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "222", foto: "candidato3.png" },
        ],
        "123": [ // Turma 123T
            { nome: "Candidato 1", numero: "231", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "232", foto: "candidato3.png" },
        ],
        "124": [ // Turma 124T
            { nome: "Candidato 1", numero: "241", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "242", foto: "candidato3.png" },
        ],
        "125": [ // Turma 125T
            { nome: "Candidato 1", numero: "251", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "252", foto: "candidato3.png" },
        ],
        "126": [ // Turma 126T
            { nome: "Candidato 1", numero: "261", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "262", foto: "candidato3.png" },
        ],
        "127": [ // Turma 127T
            { nome: "Candidato 1", numero: "271", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "272", foto: "candidato3.png" },
        ],
    },
    "3": { // 3º ano
        "131": [ // Turma 131M
            { nome: "Candidato 1", numero: "311", foto: "candidato1.png" },
            { nome: "Candidato 2", numero: "312", foto: "candidato5.png" },
        ],
        "132": [ // Turma 132M
            { nome: "Candidato 1", numero: "321", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "322", foto: "candidato3.png" },
        ],
        "133": [ // Turma 133T
            { nome: "Candidato 1", numero: "331", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "332", foto: "candidato3.png" },
        ],
        "134": [ // Turma 134T
            { nome: "Candidato 1", numero: "341", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "342", foto: "candidato3.png" },
        ],
        "135": [ // Turma 135T
            { nome: "Candidato 1", numero: "351", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "352", foto: "candidato3.png" },
        ],
        "136": [ // Turma 136T
            { nome: "Candidato 1", numero: "361", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "362", foto: "candidato3.png" },
        ],
        "137": [ // Turma 137T
            { nome: "Candidato 1", numero: "371", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "372", foto: "candidato3.png" },
        ],
        "138": [ // Turma 138T
            { nome: "Candidato 1", numero: "381", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "382", foto: "candidato3.png" },
        ],
    },
    "4": { // 4º ano
        "141": [ // Turma 141M
            { nome: "Candidato 1", numero: "411", foto: "candidato1.png" },
            { nome: "Candidato 2", numero: "412", foto: "candidato5.png" },
        ],
        "142": [ // Turma 142M
            { nome: "Candidato 1", numero: "421", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "422", foto: "candidato3.png" },
        ],
        "143": [ // Turma 143M
            { nome: "Candidato 1", numero: "431", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "432", foto: "candidato3.png" },
        ],
        "144": [ // Turma 144T
            { nome: "Candidato 1", numero: "441", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "442", foto: "candidato3.png" },
        ],
        "145": [ // Turma 145T
            { nome: "Candidato 1", numero: "451", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "452", foto: "candidato3.png" },
        ],
        "146": [ // Turma 146T
            { nome: "Candidato 1", numero: "461", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "462", foto: "candidato3.png" },
        ],
        "147": [ // Turma 137T
            { nome: "Candidato 1", numero: "471", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "472", foto: "candidato3.png" },
        ],
        "148": [ // Turma 138T
            { nome: "Candidato 1", numero: "481", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "482", foto: "candidato3.png" },
        ],
        "149": [ // Turma 149T
            { nome: "Candidato 1", numero: "491", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "492", foto: "candidato3.png" },
        ],
    },
    "5": { // 5º ano
        "151": [ // Turma 151M
            { nome: "Candidato 1", numero: "511", foto: "candidato1.png" },
            { nome: "Candidato 2", numero: "512", foto: "candidato5.png" },
        ],
        "152": [ // Turma 152M
            { nome: "Candidato 1", numero: "521", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "522", foto: "candidato3.png" },
        ],
        "153": [ // Turma 153T
            { nome: "Candidato 1", numero: "531", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "532", foto: "candidato3.png" },
        ],
        "154": [ // Turma 154T
            { nome: "Candidato 1", numero: "541", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "542", foto: "candidato3.png" },
        ],
        "155": [ // Turma 155T
            { nome: "Candidato 1", numero: "551", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "552", foto: "candidato3.png" },
        ],
        "156": [ // Turma 156T
            { nome: "Candidato 1", numero: "561", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "562", foto: "candidato3.png" },
        ],
        "157": [ // Turma 157T
            { nome: "Candidato 1", numero: "571", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "572", foto: "candidato3.png" },
        ],
    },
    "6": { // 6º ano
        "161": [ // Turma 161M
            { nome: "Candidato 1", numero: "611", foto: "candidato1.png" },
            { nome: "Candidato 2", numero: "612", foto: "candidato5.png" },
        ],
        "162": [ // Turma 162M
            { nome: "Candidato 1", numero: "621", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "622", foto: "candidato3.png" },
        ],
        "163": [ // Turma 163M
            { nome: "Candidato 1", numero: "631", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "632", foto: "candidato3.png" },
        ],
        "164": [ // Turma 164M
            { nome: "Candidato 1", numero: "641", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "642", foto: "candidato3.png" },
        ],
        "165": [ // Turma 165M
            { nome: "Candidato 1", numero: "651", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "652", foto: "candidato3.png" },
        ],
        "166": [ // Turma 166T
            { nome: "Candidato 1", numero: "661", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "662", foto: "candidato3.png" },
        ],
        "167": [ // Turma 167T
            { nome: "Candidato 1", numero: "671", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "672", foto: "candidato3.png" },
        ],
    },
    "7": { // 7º ano
        "171": [ // Turma 171M
            { nome: "Candidato 1", numero: "711", foto: "candidato1.png" },
            { nome: "Candidato 2", numero: "712", foto: "candidato5.png" },
        ],
        "172": [ // Turma 172M
            { nome: "Candidato 1", numero: "721", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "722", foto: "candidato3.png" },
        ],
        "173": [ // Turma 173M
            { nome: "Candidato 1", numero: "731", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "732", foto: "candidato3.png" },
        ],
        "174": [ // Turma 174M
            { nome: "Candidato 1", numero: "741", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "742", foto: "candidato3.png" },
        ],
        "175": [ // Turma 175M
            { nome: "Candidato 1", numero: "751", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "752", foto: "candidato3.png" },
        ],
        "176": [ // Turma 176M
            { nome: "Candidato 1", numero: "761", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "762", foto: "candidato3.png" },
        ],
        "177": [ // Turma 177T
            { nome: "Candidato 1", numero: "771", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "772", foto: "candidato3.png" },
        ],
    },
    "8": { // 8º ano
        "181": [ // Turma 181M
            { nome: "Candidato 1", numero: "811", foto: "candidato1.png" },
            { nome: "Candidato 2", numero: "812", foto: "candidato5.png" },
        ],
        "182": [ // Turma 182M
            { nome: "Candidato 1", numero: "821", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "822", foto: "candidato3.png" },
        ],
        "183": [ // Turma 183M
            { nome: "Candidato 1", numero: "831", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "832", foto: "candidato3.png" },
        ],
        "184": [ // Turma 184M
            { nome: "Candidato 1", numero: "841", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "842", foto: "candidato3.png" },
        ],
        "185": [ // Turma 185M
            { nome: "Candidato 1", numero: "851", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "852", foto: "candidato3.png" },
        ],
        "186": [ // Turma 186M
            { nome: "Candidato 1", numero: "861", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "862", foto: "candidato3.png" },
        ],
    },
    "9": { // 9º ano
        "191": [ // Turma 191M
            { nome: "Candidato 1", numero: "911", foto: "candidato1.png" },
            { nome: "Candidato 2", numero: "912", foto: "candidato5.png" },
        ],
        "192": [ // Turma 192M
            { nome: "Candidato 1", numero: "921", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "922", foto: "candidato3.png" },
        ],
        "193": [ // Turma 193M
            { nome: "Candidato 1", numero: "931", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "932", foto: "candidato3.png" },
        ],
        "194": [ // Turma 194M
            { nome: "Candidato 1", numero: "941", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "942", foto: "candidato3.png" },
        ],
        "195": [ // Turma 195M
            { nome: "Candidato 1", numero: "951", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "952", foto: "candidato3.png" },
        ],
        "196": [ // Turma 196M
            { nome: "Candidato 1", numero: "961", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "962", foto: "candidato3.png" },
        ],
        "197": [ // Turma 197M
            { nome: "Candidato 1", numero: "971", foto: "candidato5.png" },
            { nome: "Candidato 2", numero: "972", foto: "candidato3.png" },
        ],
    },
}

let votos = {
    "ano": "",
    "turma": "",
    "resultados": [],
}


const buttons = document.querySelectorAll(".button")
let mensagem = document.querySelector("#mensagem")
let mensagem2 = document.querySelector("#mensagem2")
let mensagemDeErro = document.querySelector("#mensagem-erro")
let divCaixasDeEntrada = document.querySelector("#caixas-de-entrada")
let caixas = document.querySelectorAll(".caixa")
let digitos = document.querySelectorAll(".digito")
let digito1 = "", digito2 = "", digito3 = ""
let divCandidatos = document.querySelector("#candidatos")

let ano = "", turma="", voto = ""
let candidatos = document.querySelectorAll('.candidato')


function atualizarCandidatos() {
    const candidatos = candidatosPorTurma[ano][turma]

    // Seleciona todos os elementos com a classe '.candidato'
    const candidatosElementos = document.querySelectorAll('.candidato')

    if(candidatos.length < candidatosElementos.length) {
        for (let i = candidatos.length; i < candidatosElementos.length; i++) {
            candidatosElementos[i].style.display = 'none'
        }
    }

    // Itera sobre cada candidato e atualiza as informações
    candidatosElementos.forEach((candidatoElemento, index) => {
        if (index < candidatos.length) {
            const fotoElemento = candidatoElemento.querySelector('.foto')
            fotoElemento.style.backgroundImage = `url('../imagens/${candidatos[index].foto}')`
            fotoElemento.style.backgroundSize = 'cover'
            
            const nomeElemento = candidatoElemento.querySelector('p:nth-of-type(1)')
            nomeElemento.textContent = candidatos[index].nome
    
            const numeroElemento = candidatoElemento.querySelector('p:nth-of-type(2)')
            numeroElemento.textContent = candidatos[index].numero
        }
    })
}


buttons.forEach(button => {
    button.addEventListener("click", function() {
        const valor = this.getAttribute("data-number") || this.getAttribute("data-branco") || 
        this.getAttribute("data-corrige") || this.getAttribute("data-confirma")

        if (valor === "BRANCO") {
            votarBranco()
        } else if (valor === "CORRIGE") {
            limpardigitos()
        } else if (valor === "CONFIRMA") {
            confirmar()
        } else if (this.getAttribute("data-number") !== null) {
            lidarComNúmeroClicado(valor)
        }
    })
})

function atualizardigitos() {
    digitos[0].textContent = digito1
    digitos[1].textContent = digito2
    digitos[2].textContent = digito3
}

function limpardigitos() {
    digito1 = ""
    digito2 = ""
    digito3 = ""

    atualizardigitos()
}

function lidarComNúmeroClicado(numero) {
    if (digitos[0].innerText === "") {
        digito1 = numero
    }
    else if (digitos[1].innerText === "") {
        digito2 = numero
    }
    else if (digitos[2].innerText === "") {
        digito3 = numero
        
        // TO DO: lógica para atualizar a página do voto com o rosto e o nome do candidato que o aluno escolheu
        /* if(mensagem.innerText === "Digite o número do seu candidato:") {
            
        } */
    }
    atualizardigitos()
}

function confirmar() {

    if(mensagem.innerText === 'Aperte "Confirma" para iniciar a votação!') {
        
        mensagem.innerText = "Digite o ano:"

        divCaixasDeEntrada.classList.remove("caixas-desativadas")
        divCaixasDeEntrada.classList.add("caixas-ativadas")

        // Oculta todos os digitos de entrada
        document.querySelectorAll(".caixa").forEach(caixa => {
            caixa.style.display = "none"
        })
        
        // Exibe apenas a primeira caixa de entrada
        document.querySelector(".caixa1").style.display = "flex"

        return
    }
    
    if(mensagem.innerText === "Digite o ano:") {

        if(digito1 == "") {
            caixas[0].style.border = "2px solid red"
            return
        }

        if(verificarAno(digito1)) {
            ano = digito1
            votos.ano = ano
            console.log(`O ${ano}º ano existe.`)
        }
        else {
            caixas[0].style.border = "2px solid red"
            mensagemDeErro.innerText = "Ano inválido! Tente novamente."
            console.log(`O ${ano}° ano não existe.`)
            return
        }


        caixas.forEach(caixa => {
            caixa.style.border = "2px solid black"
        })
        limpardigitos()

        mensagem.innerText = "Digite a turma:"

        divCaixasDeEntrada.classList.remove("caixas-desativadas")
        divCaixasDeEntrada.classList.add("caixas-ativadas")

        caixas.forEach(caixa => {
            caixa.style.display = "flex"
        })

        mensagemDeErro.innerText = ""

        return
    }

    if(mensagem.innerText === "Digite a turma:") {

        if(digito1 == "" || digito2 == "" || digito3 == "") {
            caixas.forEach(caixa => {
                caixa.style.border = "2px solid red"
            })
            return
        }

        let turmaTemporaria = digito1+digito2+digito3

        if(verificarTurma(ano, turmaTemporaria)) {
            turma = turmaTemporaria
            votos.turma = turma
            console.log(`A turma ${turma} existe no ${ano}º ano.`)
        }
        else {
            caixas.forEach(caixa => {
                caixa.style.border = "2px solid red"
            })

            mensagemDeErro.innerText = "Turma inválida! Tente novamente."
            console.log(`A turma ${turma} não existe no ${ano}º ano .`)
            return
        }

        caixas.forEach(caixa => {
            caixa.style.border = "2px solid black"
        })
        limpardigitos()

        mensagem.innerText = "Digite o número do seu candidato:"

        divCandidatos.classList.remove("candidatos-desativados")
        divCandidatos.classList.add("candidatos-ativados")

        divCaixasDeEntrada.classList.remove("caixas-desativadas")
        divCaixasDeEntrada.classList.add("caixas-ativadas")

        /* capturarCandidatos() */
        console.log(candidatosPorTurma[ano][turma])
        atualizarCandidatos()

        mensagemDeErro.innerText = ""

        return
    }

    if(mensagem.innerText === "Digite o número do seu candidato:") {

        if(digito1 == "" || digito2 == "" || digito3 == "") {
            caixas.forEach(caixa => {
                caixa.style.border = "2px solid red"
            })
            return
        }

        voto = digito1+digito2+digito3

        if (verificarNumeroCandidato(ano, turma, voto)) {
            votos.resultados.push(voto)
            console.log(`O número do candidato ${voto} existe na turma ${turma} do ${ano}º ano.`)
        } else {
            caixas.forEach(caixa => {
                caixa.style.border = "2px solid red"
            })

            mensagemDeErro.innerText = "Número inválido! Tente novamente."
            console.log(`O número do candidato ${voto} não existe na turma ${turma} do ${ano}º ano.`)
            return
        }

        caixas.forEach(caixa => {
            caixa.style.border = "2px solid black"
        })
        limpardigitos()

        mensagem.innerText = "VOTO CONFIRMADO"
        mensagem2.innerText = "Digite 1 para encerrar a votação ou 2 para iniciar o próximo voto"

        divCandidatos.classList.add("candidatos-desativados")
        divCandidatos.classList.remove("candidatos-ativados")

        divCaixasDeEntrada.classList.remove("caixas-desativadas")
        divCaixasDeEntrada.classList.add("caixas-ativadas")

        // Oculta todas as digitos de entrada
        document.querySelectorAll(".caixa").forEach(caixa => {
            caixa.style.display = "none"
        })
        
        // Exibe apenas a primeira caixa de entrada
        document.querySelector(".caixa1").style.display = "flex"

        mensagemDeErro.innerText = ""

        return
    }

    if(mensagem.innerText === "VOTO CONFIRMADO") {
        if(digito1 == "") {
            caixas[0].style.border = "2px solid red"
            return
        }
        
        caixas.forEach(caixa => {
            caixa.style.border = "2px solid black"
        })


        if(digito1=="1") {
            console.log(votos)
            
            caixas.forEach(caixa => {
                caixa.style.border = "2px solid black"
            })
            limpardigitos()
            
            mensagem.innerText = "FIM"
            mensagem2.innerText = "Digite 1 para gerar o PDF"
        }
        else if(digito1=="2") {
            console.log(votos)

            caixas.forEach(caixa => {
                caixa.style.display = "flex"
                caixa.style.border = "2px solid black"
            })
            limpardigitos()
            
            mensagem2.innerText = ""
            mensagem.innerText = "Digite o número do seu candidato:"
    
            divCandidatos.classList.remove("candidatos-desativados")
            divCandidatos.classList.add("candidatos-ativados")
    
            divCaixasDeEntrada.classList.remove("caixas-desativadas")
            divCaixasDeEntrada.classList.add("caixas-ativadas")
    
            /* capturarCandidatos() */
            console.log(candidatosPorTurma[ano][turma])
            atualizarCandidatos()
    
            mensagemDeErro.innerText = ""  
        }
    }

    if(mensagem.innerText == "FIM") {

        if(digito1 == "") {
            caixas[0].style.border = "2px solid red"
            return
        }

        caixas.forEach(caixa => {
            caixa.style.border = "2px solid black"
        })

        if(digito1=="1") {
            gerarPDF()
            reiniciarVotacao()
        }
        else {
            caixas[0].style.border = "2px solid red"
            return
        }
        
        /* limpardigitos() */
    }
}

function votarBranco() {
    if(mensagem.innerText === "Digite o número do seu candidato:") {

        voto = "Branco"
        votos.resultados.push(voto)

        /* console.log(voto)
        console.log(votos) */

        caixas.forEach(caixa => {
            caixa.style.border = "2px solid black"
        })
        limpardigitos()

        mensagem.innerText = "VOTO CONFIRMADO"
        mensagem2.innerText = "Digite 1 para encerrar a votação ou 2 para iniciar o próximo voto"

        divCandidatos.classList.add("candidatos-desativados")
        divCandidatos.classList.remove("candidatos-ativados")

        divCaixasDeEntrada.classList.remove("caixas-desativadas")
        divCaixasDeEntrada.classList.add("caixas-ativadas")

        // Oculta todas as digitos de entrada
        document.querySelectorAll(".caixa").forEach(caixa => {
            caixa.style.display = "none"
        })
        
        // Exibe apenas a primeira caixa de entrada
        document.querySelector(".caixa1").style.display = "flex"

        return
    }
}

// Função para verificar se um número de candidato existe em uma turma de um determinado ano
function verificarNumeroCandidato(ano, turma, numero) {
    for (let i = 0; i < candidatosPorTurma[ano][turma].length; i++) {
        if (candidatosPorTurma[ano][turma][i].numero === numero) {
            return true
        }
    }
    return false
}

// Função para verificar se um determinado ano existe
function verificarAno(ano) {
    return candidatosPorTurma.hasOwnProperty(ano)
}

// Função para verificar se uma turma existe em um determinado ano
function verificarTurma(ano, turmaTemporaria) {
    return candidatosPorTurma[ano].hasOwnProperty(turmaTemporaria)
}

// Função para reiniciar as variáveis e elementos da votação
function reiniciarVotacao() {
    mensagem.innerText = 'Aperte "Confirma" para iniciar a votação!'
    mensagem2.innerText = ''
    mensagemDeErro.innerText = ''

    divCandidatos.classList.add("candidatos-desativados")
    divCandidatos.classList.remove("candidatos-ativados")
    divCaixasDeEntrada.classList.remove("caixas-ativadas")
    divCaixasDeEntrada.classList.add("caixas-desativadas")

    limpardigitos()

    votos = {
        "ano": "",
        "turma": "",
        "resultados": []
    }

    ano = ''
    turma = ''
}



function gerarPDF() {

    // Recuperar os dados da votação atual
    let anoAtual = votos.ano
    let turmaAtual = votos.turma
    let candidatosVotacao = candidatosPorTurma[anoAtual][turmaAtual]
    let resultados = votos.resultados
    let contagemVotosVálidos = []
    let qtdVotosBrancos = 0
    let data = new Date()

    // elemento temporário para o conteúdo do pdf
    let conteudoHTML = document.createElement('div')
    conteudoHTML.style.display = 'flex'
    conteudoHTML.style.flexDirection = 'column'
    conteudoHTML.style.alignItems = 'center'
    conteudoHTML.style.justifyContent = 'center'
    conteudoHTML.style.padding = '2em'
    conteudoHTML.style.fontWeight = '500'

    let titulo = document.createElement('h1')
    titulo.textContent = `Eleição ${anoAtual}° ano, turma ${turmaAtual}`
    conteudoHTML.appendChild(titulo)

    let dataFormatada = document.createElement('p')
    dataFormatada.textContent = `Data: ${data.toLocaleString()}`
    conteudoHTML.appendChild(dataFormatada)
    conteudoHTML.innerHTML += '<br>'


    // Adicionar os candidatos
    let subtitulo1 = document.createElement('h3')
    subtitulo1.textContent = "Candidatos:"
    conteudoHTML.appendChild(subtitulo1)

    let listaCandidatos = document.createElement('ol')
    candidatosVotacao.forEach((candidato, index) => {
        let listItem = document.createElement('li')
        listItem.textContent = `Nome: ${candidato.nome}, Número: ${candidato.numero}`
        listaCandidatos.appendChild(listItem)
    })
    conteudoHTML.appendChild(listaCandidatos)

    conteudoHTML.innerHTML += '<br>'

    candidatosVotacao.forEach((candidato, index) => {
        let qtdVotos = 0

        resultados.forEach(resultado => {
            if(candidato.numero===resultado) {
                qtdVotos++
            }
        })

        contagemVotosVálidos.push(qtdVotos)
        
    })

    resultados.forEach(resultado => {
        if(resultado==="Branco") {
            qtdVotosBrancos++
        }
    })


    let qtdCandidatos = candidatosVotacao.length

    let subtitulo2 = document.createElement('h3')
    subtitulo2.textContent = "Votos:"
    conteudoHTML.appendChild(subtitulo2)

    for(let i=0; i<qtdCandidatos; i++) {
        let resultadoCandidato = document.createElement('p')
        resultadoCandidato.innerHTML = `Número de votos do candidato ${i+1}: ${contagemVotosVálidos[i]}`
        conteudoHTML.appendChild(resultadoCandidato)
    }

    let resultadoBranco = document.createElement('p')
    resultadoBranco.innerHTML = `Número de votos brancos: ${qtdVotosBrancos}`
    conteudoHTML.appendChild(resultadoBranco)


    // Gerar o PDF a partir do conteúdo HTML
    html2pdf().from(conteudoHTML).save('resultado_votos.pdf')
}